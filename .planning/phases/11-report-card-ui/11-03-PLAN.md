---
phase: 11-report-card-ui
plan: 03
type: execute
wave: 1
depends_on: []
files_modified:
  - scrapegrape/frontend/src/Pages/Jobs/Show.tsx
autonomous: true
gap_closure: true

must_haves:
  truths:
    - "Report card displays a field-presence table showing which canonical fields exist in each metadata format"
    - "Table rows are canonical fields (headline, author, datePublished, image, description, etc.)"
    - "Table columns are formats: JSON-LD, OpenGraph, Microdata, Twitter Cards"
    - "Each cell shows a checkmark or X indicating whether the format provides that field"
  artifacts:
    - path: "scrapegrape/frontend/src/Pages/Jobs/Show.tsx"
      provides: "FieldPresenceTable component rendering within ReportCard"
      contains: "FieldPresenceTable"
  key_links:
    - from: "FieldPresenceTable"
      to: "ar.jsonld_fields / ar.opengraph_fields / ar.microdata_fields / ar.twitter_cards"
      via: "props passed from ReportCard"
      pattern: "jsonld_fields|opengraph_fields|microdata_fields|twitter_cards"
---

<objective>
Add a metadata field-presence table to the ReportCard component in Show.tsx.

Purpose: The report card currently shows format badges (JSON-LD present/absent) and a text summary, but does not show WHICH fields each format provides. Users need a table showing canonical fields as rows and formats as columns, with checkmark/X per cell.

Output: Updated Show.tsx with FieldPresenceTable rendered below the existing Metadata Profile summary.
</objective>

<execution_context>
@/Users/matt/.claude/get-shit-done/workflows/execute-plan.md
@/Users/matt/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/STATE.md
@scrapegrape/frontend/src/Pages/Jobs/Show.tsx
@scrapegrape/publishers/pipeline/steps.py
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add FieldPresenceTable to ReportCard</name>
  <files>scrapegrape/frontend/src/Pages/Jobs/Show.tsx</files>
  <action>
Create a `FieldPresenceTable` component inside Show.tsx (above the ReportCard component). It takes four optional dict props: `jsonldFields`, `opengraphFields`, `microdataFields`, `twitterCards` -- each is `Record<string, unknown> | null | undefined`.

Define a CANONICAL_FIELDS array of display rows. Each entry has a `label` (display name) and per-format field keys:

```
const CANONICAL_FIELDS = [
  { label: "Headline",       jsonld: "headline",       og: "headline",       micro: "headline",       twitter: "twitter:title" },
  { label: "Author",         jsonld: "author",         og: "author",         micro: "author",         twitter: null },
  { label: "Date Published", jsonld: "datePublished",  og: "datePublished",  micro: "datePublished",  twitter: null },
  { label: "Date Modified",  jsonld: "dateModified",   og: "dateModified",   micro: "dateModified",   twitter: null },
  { label: "Image",          jsonld: "image",          og: "image",          micro: "image",          twitter: "twitter:image" },
  { label: "Description",    jsonld: "description",    og: "description",    micro: "description",    twitter: "twitter:description" },
  { label: "Language",       jsonld: "inLanguage",     og: "inLanguage",     micro: "inLanguage",     twitter: null },
  { label: "Section",        jsonld: "articleSection",  og: "articleSection", micro: "articleSection",  twitter: null },
  { label: "Keywords",       jsonld: "keywords",        og: "keywords",       micro: "keywords",       twitter: null },
  { label: "Word Count",     jsonld: "wordCount",       og: null,             micro: "wordCount",       twitter: null },
  { label: "Paywall Info",   jsonld: "isAccessibleForFree", og: null,         micro: "isAccessibleForFree", twitter: null },
]
```

Render using the existing `Table`, `TableBody`, `TableCell`, `TableHead`, `TableHeader`, `TableRow` imports (already imported at top of file). Use existing `CircleCheck` and `CircleX` lucide icons (already imported).

Table structure:
- Header row: "Field" | "JSON-LD" | "OpenGraph" | "Microdata" | "Twitter"
- Format column headers should only show if that format has any data (i.e., the dict is not null). If ALL four are null, do not render the table at all.
- Each body row: field label in first cell, then for each active format column: green CircleCheck (size-4 text-green-600) if the field key exists and is non-null in that format's dict, red CircleX (size-4 text-red-300) otherwise.
- Use `text-sm` for all cells. Field label cell gets `font-medium`.

In the ReportCard component, after the existing Metadata Profile block (lines 613-629), add:

```tsx
{/* Field Presence Table */}
{ar && (
    <FieldPresenceTable
        jsonldFields={ar.jsonld_fields as Record<string, unknown> | null}
        opengraphFields={ar.opengraph_fields as Record<string, unknown> | null}
        microdataFields={ar.microdata_fields as Record<string, unknown> | null}
        twitterCards={ar.twitter_cards as Record<string, unknown> | null}
    />
)}
```

Wrap the table in a div with `pl-6` to align with the indented content above it. Add a small label above the table: "Field Presence by Format" using `text-xs font-medium text-muted-foreground uppercase tracking-wide mb-2`.

Do NOT render the table if none of the four dicts have data.
  </action>
  <verify>
Run `cd /Users/matt/src/itsascout/scrapegrape/frontend && npx tsc --noEmit` to verify TypeScript compiles without errors.

Run `cd /Users/matt/src/itsascout/scrapegrape/frontend && npx vite build` to verify the build succeeds.
  </verify>
  <done>
ReportCard renders a field-presence table below the metadata profile summary. Table shows canonical fields as rows and metadata formats as columns with checkmark/X indicators. Table only renders when at least one format dict has data. TypeScript compiles and Vite builds cleanly.
  </done>
</task>

</tasks>

<verification>
1. TypeScript compilation: `cd scrapegrape/frontend && npx tsc --noEmit` -- no errors
2. Vite build: `cd scrapegrape/frontend && npx vite build` -- succeeds
3. Visual check: ReportCard for a completed job with article_result shows the field presence table with appropriate checkmarks
</verification>

<success_criteria>
- FieldPresenceTable component exists and renders within ReportCard
- Table rows cover all KEY_FIELDS from the backend (headline, author, datePublished, dateModified, image, description, inLanguage, articleSection, keywords, wordCount, isAccessibleForFree)
- Table columns correspond to the four metadata formats
- Checkmark/X icons correctly reflect field presence in each format dict
- Table is hidden when no format data exists
- Build passes cleanly
</success_criteria>

<output>
After completion, create `.planning/phases/11-report-card-ui/11-03-SUMMARY.md`
</output>
